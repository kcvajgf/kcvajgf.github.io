Use Linux.



# Using the same computer for the leaderboard account and display

1. Use `nocache_serve` (a Python 3 script) to serve the html folder generated by PC^2:

    ```bash
    cd path/to/pc2/html
    path/to/nocache_serve
    ```

2. Open `file:///path/to/scoreboard_icpc/index.html?src=http://localhost:8000` in a browser. It should now work.

You may need to make `nocache_serve` executable via `chmod`. (Alternatively, just use `python3 path/to/nocache_serve` or something.)



# Using different computers for the leaderboard account and display

Assume for example that the IP address of the PC^2 leaderboard account computer is 192.168.1.11. Then:

1. Do step 1 above in the leaderboard account computer, but use `cors_serve` instead of `nocache_serve`.

2. Do step 2 above in the leaderboard display computer, but use `?src=http://192.168.1.11:8000` instead.



# Using the same computer for the leaderboard account and display (the hacky method)

1. Copy all files and folders in `scoreboard_icpc/` to the `pc2` folder.  

2. `cd` to the `pc2` folder and run `./nocache_serve`.  

3. Open `http://localhost:8000/` :D

This will clutter the PC^2 folder, so please only do this on the scoreboard computer and not on judge/admin computers just to be safe.

You can make this less hacky by not copying the `scoreboard_icpc/` files over, and instead running a script that continuously copies `pc2/html/index.html` to `scoreboard_icpc/html/` every 5 seconds or something. This is probably also the best way to serve it publicly, as long as you have a server that can serve static files and in which you can write to constantly.  



# Behind the hood

The thing works by reading off the `html/index.html` file produced by PC^2. Most of the setting up is just pointing it to where it can get this file.

In essence, it receives a URL param called `src` which should be a valid URL. It then fetches `/index.html` from that URL every 5 seconds or so. If the URL is not on the same domain as the one running `scoreboard_icpc/index.html`, then it needs to allow CORS (cross-origin resource sharing), otherwise, it will refuse the GET request and the scoreboard cannot read the data.

If `src` is not passed, then it defaults to `html/` (relative to the folder `scoreboard_icpc/`). As long as you can serve the files statically here and are able to update `html/index.html` constantly (say by copying it over every few seconds, perhaps via `scp`), the `src` param will not be needed.  

Side comment: since the `html/index.html` file is constantly changing, I think "static files" is not quite accurate. Oh well, I hope you get the point.


Note: `nocache_serve` and `cors_serve` both use Python's `http.server` library to serve the files. There are some pretty scary security warnings in its [doc](https://docs.python.org/3/library/http.server.html). I don't know how bad this really is, especially for something as simple as serving a few html, js and css files, but if you're that concerned about security (maybe you have a huge audience, or your server is sensitive), then I suggest finding a safe alternative to `nocache_serve` and `cors_serve`. It only needs to serve a bunch of "static" files, with no-cache (otherwise, the leaderboard won't update since it will fetch a cached version every time), and in the case of `cors_serve`, it needs CORS.
